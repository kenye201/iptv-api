name: Push Cloudflare A Records

on:
  workflow_dispatch:       # æ‰‹åŠ¨è§¦å‘
  schedule:
    - cron: "0 */3 * * *"  # æ¯6å°æ—¶è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡

jobs:
  push-a-records:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      - name: âš™ï¸ Install dependencies
        run: pip install requests

      - name: ğŸš€ Run CF push script
        env:
          CF_TOKEN_1: ${{ secrets.CF_TOKEN_1 }}
          CF_TOKEN_2: ${{ secrets.CF_TOKEN_2 }}
          CF_TOKEN_3: ${{ secrets.CF_TOKEN_3 }}
          CF_TOKEN_4: ${{ secrets.CF_TOKEN_4 }}
          CF_TOKEN_5: ${{ secrets.CF_TOKEN_5 }}
          CF_TOKEN_6: ${{ secrets.CF_TOKEN_6 }}
          CF_TOKEN_7: ${{ secrets.CF_TOKEN_7 }}
        run: |
          echo "ğŸ”§ Starting Cloudflare A record update..."
          PYTHONUNBUFFERED=1 python ./output/data/cf_push.py
